DATABASE_URL=postgres://postgres:postgres@localhost:5432/postgres?sslmode=disable
DATABASE_URL_EXECUTIONS=postgres://postgres:postgres@localhost:15432/postgres?sslmode=disable


# Authentication Configuration
AUTH_ENABLED=true
AUTH_DEV_MODE=true

# BadAI Authentication
BADAI_AUTH_ENABLED=false
BADAI_API_URL=http://localhost:9151/graphql


# Worker Configuration
# Number of worker processes (auto = CPU cores, 1 = single worker mode)
WORKER_COUNT=1

# Execution Mode
# 'local' or 'distributed'
EXECUTION_MODE=distributed

# CORS Configuration
CORS_ENABLED=true
CORS_ORIGIN=*

# WebSocket Configuration
WS_ENABLED=true
WS_HEARTBEAT_INTERVAL=30000

# Health Endpoint
HEALTH_ENABLED=true
HEALTH_PATH=/health

# Logging
# debug, info, warn, error
LOG_LEVEL=debug
# development, production
NODE_ENV=development

# Worker Configuration


# Delay before restarting failed worker (ms)
WORKER_RESTART_DELAY=1000

# Maximum restart attempts per worker
MAX_WORKER_RESTARTS=-1

# Health Monitoring
# Port for health endpoint
HEALTH_PORT=9090
# Worker heartbeat interval (ms)
HEARTBEAT_INTERVAL=5000

# Metrics Configuration
# Enable/disable metrics collection
ENABLE_METRICS=false

# Metrics log level (debug, info, warn)
METRICS_LOG_LEVEL=debug

# Sampling configuration - useful for high-throughput production environments
# Enable sampling to reduce log volume
METRICS_SAMPLING_ENABLED=false
# Sampling rate (0.0 to 1.0) - e.g., 0.1 means 10% of metrics are logged
METRICS_SAMPLING_RATE=1.0

# Batching configuration - batch metrics before logging to reduce I/O
# Number of metrics to batch before logging (1 = immediate logging)
METRICS_BATCH_SIZE=1
# Interval in ms to flush batched metrics
METRICS_FLUSH_INTERVAL=1000

# Include memory usage snapshots in metrics
METRICS_INCLUDE_MEMORY=true


# DBOS Configuration (Optional - for new execution engine)
# ============================================================
# Enable DBOS-based execution (replaces Kafka for task distribution)
# When enabled, uses DBOS Durable Queues and workflows for execution
# When disabled, uses traditional Kafka-based execution
ENABLE_DBOS_EXECUTION=true

# Global concurrency limit across all workers (default: 100)
# Maximum number of executions running simultaneously across the entire cluster
DBOS_QUEUE_CONCURRENCY=100

# Per-worker concurrency limit (default: 5)
# Maximum number of executions running simultaneously on a single worker process
# Should be lower than global concurrency to allow load distribution
DBOS_WORKER_CONCURRENCY=5

# DBOS Admin Server Configuration
# The admin server provides a management UI for DBOS workflows
# Enable/disable admin server (default: true)
DBOS_ADMIN_ENABLED=true
# Admin server port (default: 3022 to avoid conflicts with chaingraph-backend on 3001)
DBOS_ADMIN_PORT=3022


# Demo User Authentication (enabled by default)
# Set to 'false' to disable demo user creation for security or rate limiting
DEMO_AUTH_ENABLED=true

# Demo User Expiration (default: 7 days)
# How many days before demo accounts expire
# Valid range: 1-365 days
DEMO_EXPIRY_DAYS=7

# Demo User JWT Secret (REQUIRED when DEMO_AUTH_ENABLED=true in production)
# Generate a secure secret with: openssl rand -base64 64
# This is used to sign stateless demo user tokens
DEMO_TOKEN_SECRET=your-long-random-secret-here-change-in-production
